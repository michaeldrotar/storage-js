"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.Storage=t()}(this,function(){function e(e){return"[object Array]"===Object.prototype.toString.call(e)}function t(t,n){var r,o,i;if(e(t))for(r=0,o=t.length;o>r;r++)n(t[r],r,t);else for(r in t)if(t.hasOwnProperty(r)&&(i=n(t[r],r,t),void 0!==i))return i}function n(e){return e?"string"==typeof e?e.split(/\./g):e.slice(0):[]}function r(e){var t={}.hasOwnProperty;return{get:function(n){var r=t.call(e,n);return r?e[n]:void 0},all:function(){var n,r={};for(n in e)t.call(e,n)&&(r[n]=e[n]);return r},set:function(t,n){e[t]=n.toString()},remove:function(t){delete e[t]},clear:function(){var n;for(n in e)t.call(e,n)&&delete e[n]},decode:JSON.parse,encode:JSON.stringify}}function o(e){var n=!0,o=!0;if(!e)return r({});if("string"==typeof e){if(g.hasOwnProperty(e))return g[e]}else{if(t(g.page,function(t,r){var o=typeof e[r];"function"!==o&&("encode"!==r&&"decode"!==r||"undefined"===o)&&(n=!1)}),n)return e.encode=e.encode||JSON.stringify,e.decode=e.decode||JSON.parse,e;if(t(e,function(e){var t=typeof e;"string"!==t&&(o=!1)}),o)return r(e)}throw new Error("Storage(medium, namespace) : medium must be the name of a predefined medium, an object that implements the StorageMedium interface, or an object that has only string values")}function i(e,t,n,r){var o,i,u=n.pop();if(!r)return void 0;try{r=e.decode(r)}catch(c){throw new Error("Failed to parse value stored at "+key)}for(o=0,i=n.length;i>o;o++){if("object"!=typeof r[n[o]])return void 0;r=r[n[o]]}return u?r[u]:r}function u(e,t){var r=n(t),o=r.shift(),u=e.get(o);return u&&u.then?u.then(function(t){return i(e,o,r,t)}):i(e,o,r,u)}function c(e,n){var r={};return t(n,function(t,n){r[n]=e.decode(t)}),r}function f(e){var t=e.all();return t&&t.then?t.then(function(t){return c(e,t)}):c(e,t)}function a(e,t,n,r,o){var i,u=n.pop(),c=r;for(u&&!r&&(r=c={}),i=0;i<n.length;i++)"object"!=typeof c[n[i]]&&(c[n[i]]={}),c=c[n[i]];u?c[u]=o:r=c=o;try{return e.set(t,e.encode(r))}catch(f){throw new Error("Failed to store value at "+key)}}function s(e,t,r){var o=n(t),i=o.shift(),c=u(e,i);return c&&c.then?c.then(function(t){return a(e,i,o,t,r)}):a(e,i,o,c,r)}function l(e,t,n,r){var o,i=n.pop(),u=r;if(r){for(o=0;o<n.length;o++){if("object"!=typeof u[n[o]])return;u=u[n[o]]}if(i){delete u[i];try{return e.set(t,e.encode(r))}catch(c){throw new Error("Failed to remove key at "+key)}}return e.remove(t)}}function d(e,t){var r=n(t),o=r.shift(),i=u(e,o);return i&&i.then?i.then(function(t){return l(e,o,r,t)}):l(e,o,r,i)}function h(e){return e.clear()}{var p,v=this,g={};({}).hasOwnProperty}return g.page=r({}),t({local:"localStorage",session:"sessionStorage"},function(e,t){var n=v&&v[e];g[t]=n?{get:function(e){var t=n.getItem(e);return"string"==typeof t?t:void 0},all:function(){var e,t,r,o={};for(e=0,t=n.length;t>e;e++)r=n.key(e),o[r]=n.getItem(r);return o},set:function(e,t){n.setItem(e,t)},remove:function(e){n.removeItem(e)},clear:function(){n.clear()},decode:JSON.parse,encode:JSON.stringify}:g.page}),p=function(e,t){function r(e){return e=n(e),t?t.concat(e):e}return this===v?new p(e,t):(e=o(e),t=n(t),this.get=function(t){return u(e,r(t))},this.all=function(){return t.length?u(e,t):f(e)},this.set=function(t,n){return s(e,r(t),n)},this.remove=function(t){return d(e,r(t))},this.clear=function(){return t.length?s(e,t,{}):h(e)},this.createNamespace=function(n){var r=t.slice(0);return r.push(n),new p(e,r)},this)}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIj8iXSwibmFtZXMiOlsicm9vdCIsImxpYiIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJTdG9yYWdlIiwidGhpcyIsImlzQXJyYXkiLCJ2YWx1ZSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsImZvckVhY2giLCJvYmoiLCJjYWxsYmFjayIsImtleSIsImxlbmd0aCIsInJldCIsImhhc093blByb3BlcnR5IiwidW5kZWZpbmVkIiwiZ2V0a2V5cyIsInNwbGl0Iiwic2xpY2UiLCJjcmVhdGVNZWRpdW1Gcm9tT2JqZWN0IiwiZGF0YSIsImdldCIsImhhcyIsImFsbCIsInNldCIsInJlbW92ZSIsImNsZWFyIiwiZGVjb2RlIiwiSlNPTiIsInBhcnNlIiwiZW5jb2RlIiwic3RyaW5naWZ5IiwiY3JlYXRlTWVkaXVtIiwiaXNNZWRpdW0iLCJpc1N0cmluZ3MiLCJtZWRpdW1zIiwicGFnZSIsIl8iLCJ0eXBlIiwiRXJyb3IiLCJfZ2V0IiwibWVkaXVtIiwiZmlyc3RrZXkiLCJrZXlzIiwiaSIsImwiLCJsYXN0a2V5IiwicG9wIiwiZSIsInNoaWZ0IiwidGhlbiIsIl9hbGwiLCJjb3B5IiwiX3NldCIsIm9yaWdpbmFsIiwiY3VycmVudCIsIl9yZW1vdmUiLCJsb2NhbCIsInNlc3Npb24iLCJzdG9yYWdlTmFtZSIsIm1lZGl1bU5hbWUiLCJzdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwibmFtZXNwYWNlIiwiYWRkTmFtZXNwYWNlIiwiY29uY2F0IiwiY3JlYXRlTmFtZXNwYWNlIiwibnMiLCJuZXdOYW1lc3BhY2UiLCJwdXNoIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUNDLFNBQVVBLEVBQUtDLEdBQ1Msa0JBQVhDLFNBQXlCQSxPQUFPQyxJQUMxQ0QsVUFBV0QsR0FDaUIsbUJBQVhHLFNBQTBCQSxPQUFPQyxRQUNsREQsT0FBT0MsUUFBVUosSUFFakJELEVBQUtNLFFBQVVMLEtBRWhCTSxLQUFN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